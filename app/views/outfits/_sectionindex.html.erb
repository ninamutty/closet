<h1>Listing Outfits</h1>

<% if @outfits == nil || @outfits.length == 0 %>
  <p>  You don't have any outfits yet! Please add one to begin!</p>
<% else %>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Photos</th>
        <!-- <th>Category</th>
        <th>Reworn count</th> -->
        <th>Favorite</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @outfits.each do |outfit| %>
        <tr>
          <td><%= link_to(outfit.name, outfit_path(id: outfit.id.to_i))%></td>
          <% photo = outfit.photo %>
          <%# raise %>
          <% if outfit.photos != [] && outfit.photos.length != 0 %>
            <td><%= link_to(image_tag(outfit.photos.first.image.url(:medium), alt: "photo of #{outfit.name}"), outfit_path(id: outfit.id)) %></td>
          <% elsif photo.url !=  "/photos/original/missing.png" %>
            <td><%= link_to(image_tag(outfit.photo.url(:medium), alt: "photo of #{outfit.name}"), outfit_path(id: outfit.id)) %></td>
          <% else %>
            <td>No Photo</td>
          <% end %>
          <!-- <td><%= outfit.category %></td>
          <td><%= outfit.reworn_count %></td> -->
          <td><%= outfit.favorite ? "yes" : "no" %></td>
          <td><%= link_to 'Show', outfit_path(id: outfit.id) %></td>
          <td><%= link_to 'Edit', edit_outfit_path(id: outfit.id) %></td>
          <td><%= link_to 'Destroy', outfit, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <br>
<% end %>

<%= link_to 'New Outfit', new_outfit_path %>
